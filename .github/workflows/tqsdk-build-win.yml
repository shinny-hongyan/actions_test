name: actions_test

on: [push]

jobs:
  build:
    strategy:
      matrix:
        python-version: [3.6]
        python-arch: ["x86"]

    env:
      PYTHONHASHSEED: 32
      TZ: "UTC-8"

    runs-on: windows-latest

    steps:
    - name: Create log file name
      id: get_log_name
      run: |
        #echo "$(date -d today +%Y%m%d)_${{matrix.python-version}}_${{matrix.python-arch}}.log" > .version/revision.txt
        #echo $(date -d today +%Y%m%d)_${{matrix.python-version}}_${{matrix.python-arch}}.log > .version/revision.txt
        
        echo "::set-env name=dateenv::$(date -d today +%Y%m%d)"
        echo "::set-env name=fileenv::$dateenv.log"

        echo "::set-output name=date::$(date -d today +%Y%m%d)"
        echo "::set-output name=version::${{matrix.python-version}}"
        echo "::set-output name=arch::${{matrix.python-arch}}"
        echo "::set-output name=file::$date_$version_$arch.log"
        echo "::set-output name=file2::$(<.version/major.txt)"        

    - name: Run Test Case
      run: |
        echo ${{steps.get_log_name.outputs.date}}
        echo ${{steps.get_log_name.outputs.version}}
        echo ${{steps.get_log_name.outputs.file}}
        echo ${{steps.get_log_name.outputs.file2}}
        echo ${{env:dateenv}}
        echo ${{env:fileenv}}
  